{"version":3,"sources":["webpack:///src/app/shared/guards/auth.guard.ts"],"names":["AuthGuard","router","toastr","api","next","state","isLoggedIn","navigate","providedIn"],"mappings":";;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;;UAQaA,SAAS;AAIrB,2BACSC,MADT,EAESC,MAFT,EAGSC,GAHT,EAGwB;AAAA;;AAFf,eAAAF,MAAA,GAAAA,MAAA;AACA,eAAAC,MAAA,GAAAA,MAAA;AACA,eAAAC,GAAA,GAAAA,GAAA;AAEJ;;AATgB;AAAA;AAAA,sCAYpBC,IAZoB,EAapBC,KAboB,EAaM;AAC1B,gBAAI,KAAKF,GAAL,CAASG,UAAT,EAAJ,EAA2B;AAC1B,qBAAO,IAAP;AACA,aAFD,MAGK;AACJ,mBAAKL,MAAL,CAAYM,QAAZ,CAAqB,CAAC,QAAD,CAArB;AACA;AACD;AApBoB;;AAAA;AAAA,S;;;;gBAPb;;gBAEA;;gBACA;;;;AAIIP,eAAS,eADrB,iEAAW;AAAEQ,kBAAU,EAAE;AAAd,OAAX,CACqB,E,iCAKJ,sD,EACA,wD,EACH,gE,EAPO,GAATR,SAAS,CAAT","file":"common-es5.js","sourcesContent":["import { Injectable } from '@angular/core';\r\nimport { Router, CanActivate, ActivatedRouteSnapshot, RouterStateSnapshot, UrlTree } from '@angular/router';\r\nimport { Observable } from 'rxjs';\r\nimport { ToastrService } from 'ngx-toastr';\r\nimport { ApiService } from '../services/api.service';\r\n\r\n\r\n@Injectable({ providedIn: 'root' })\r\nexport class AuthGuard implements CanActivate {\r\n\tmenuItemArray: any;\r\n\tbacktoDashboard: boolean;\r\n\tadminData: any;\r\n\tconstructor(\r\n\t\tprivate router: Router,\r\n\t\tprivate toastr: ToastrService,\r\n\t\tprivate api: ApiService,\r\n\r\n\t) { }\r\n\r\n\tcanActivate(\r\n\t\tnext: ActivatedRouteSnapshot,\r\n\t\tstate: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n\t\tif (this.api.isLoggedIn()) {\r\n\t\t\treturn true;\r\n\t\t}\r\n\t\telse {\r\n\t\t\tthis.router.navigate(['/login']);\r\n\t\t}\r\n\t}\r\n\t// canActivate(next: ActivatedRouteSnapshot, state: RouterStateSnapshot): Observable<boolean | UrlTree> | Promise<boolean | UrlTree> | boolean | UrlTree {\r\n\t//     if (!localStorage.getItem('admin') && (state.url !== '/' && state.url !== '/forgotPassword'\r\n\t//         && state.url !== '/changePassword' && state.url !== '/reset-password')) {\r\n\t//         this.router.navigateByUrl('/');\r\n\t//         return false;\r\n\t//     } else if (localStorage.getItem('admin')) {\r\n\t//         this.adminData = JSON.parse(localStorage.getItem('admin'));\r\n\t//         if ((this.adminData.role.slug != 'super_admin') && (this.adminData.role.permissions.indexOf(next.data.key) == -1)) {\r\n\t//             this.toastr.warning(`You don't have access to this page`)\r\n\t//             this.router.navigateByUrl('/dashboard');\r\n\t//             return false\r\n\t//         }\r\n\r\n\t//         if (state.url === '/') {\r\n\t//             this.router.navigateByUrl('/dashboard');\r\n\t//         }\r\n\t//         if (localStorage.getItem('menuItemArray')) {\r\n\t//             const checkUrl = state.url.split('/');\r\n\t//             const url = checkUrl[1];\r\n\t//             this.backtoDashboard = true;\r\n\t//             this.menuItemArray = JSON.parse(localStorage.getItem('menuItemArray'));\r\n\t//             for (const i of this.menuItemArray) {\r\n\t//                 if ((i.state === url) && i.value === true) {\r\n\t//                     if (this.adminData.role === 'subAdmin' && checkUrl && checkUrl.length && checkUrl.length > 2) {\r\n\t//                         if (i.create === false && (checkUrl[2]).includes('add-')) {\r\n\t//                             this.backtoDashboard = true;\r\n\t//                         } else if (i.update === false && (checkUrl[2]).includes('edit-')) {\r\n\t//                             this.backtoDashboard = true;\r\n\t//                         } else {\r\n\t//                             this.backtoDashboard = false;\r\n\t//                         }\r\n\t//                     } else {\r\n\t//                         this.backtoDashboard = false;\r\n\t//                     }\r\n\t//                     break;\r\n\t//                 }\r\n\t//             }\r\n\r\n\t//             if (this.backtoDashboard === true) {\r\n\t//                 this.router.navigateByUrl('/dashboard');\r\n\t//             }\r\n\t//         }\r\n\t//     }\r\n\r\n\t//     return true;\r\n\t// }\r\n}"]}